"use strict";(self["webpackChunkrow_bender"]=self["webpackChunkrow_bender"]||[]).push([[77],{24077:(e,t,o)=>{o.r(t),o.d(t,{default:()=>N});var i=o(83673),n=o(98880);const a=(0,i.Uk)("Json"),s=(0,i.Uk)("Template"),r=(0,i.Uk)("Rows (csv)"),l=(0,i.Uk)("Result");function d(e,t,o,d,h,u){const p=(0,i.up)("q-resize-observer"),c=(0,i.up)("q-toolbar-title"),g=(0,i.up)("q-space"),m=(0,i.up)("q-toolbar"),f=(0,i.up)("MonacoEditor"),v=(0,i.up)("file-drop"),w=(0,i.up)("q-splitter"),C=(0,i.up)("q-toggle"),y=(0,i.up)("q-btn"),b=(0,i.up)("q-select"),E=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(E,{class:"justify-evenly",onDragover:t[5]||(t[5]=(0,n.iM)((()=>{}),["prevent"]))},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:e.horizontalSplitterModel,"onUpdate:modelValue":t[4]||(t[4]=t=>e.horizontalSplitterModel=t),style:{width:"100%","max-height":"100%",height:"calc(100vh - 50px)"},horizontal:"","before-class":"overflow-hidden","after-class":"overflow-hidden"},{before:(0,i.w5)((()=>[(0,i.Wm)(w,{modelValue:e.topSplitterModel,"onUpdate:modelValue":t[0]||(t[0]=t=>e.topSplitterModel=t),style:{width:"100%"}},{before:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-primary text-white shadow-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{shrink:""},{default:(0,i.w5)((()=>[a])),_:1}),(0,i.Wm)(g)])),_:1}),(0,i.Wm)(v,{fileDrop:e.onJsonEditorChange},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{height:e.topHeight,value:e.jsonRef,theme:e.vsTheme,language:"json",options:e.jsonEditorOptions,onChange:e.onJsonEditorChange},null,8,["height","value","theme","options","onChange"])])),_:1},8,["fileDrop"])])),after:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-primary text-white shadow-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(g),(0,i.Wm)(c,{shrink:""},{default:(0,i.w5)((()=>[s])),_:1})])),_:1}),(0,i.Wm)(v,{fileDrop:e.onTemplateEditorChange},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{height:e.topHeight,value:e.templateRef,theme:e.vsTheme,language:"handlebars",options:e.templateEditorOptions,onChange:e.onTemplateEditorChange},null,8,["height","value","theme","options","onChange"])])),_:1},8,["fileDrop"])])),default:(0,i.w5)((()=>[(0,i.Wm)(p,{onResize:e.onTemplateEditorResize},null,8,["onResize"])])),_:1},8,["modelValue"])])),after:(0,i.w5)((()=>[(0,i.Wm)(p,{onResize:e.onCsvEditorResize},null,8,["onResize"]),(0,i.Wm)(w,{modelValue:e.bottomSplitterModel,"onUpdate:modelValue":t[3]||(t[3]=t=>e.bottomSplitterModel=t),style:{width:"100%"},"before-class":"overflow-hidden","after-class":"overflow-hidden"},{before:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-primary text-white shadow-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[r])),_:1}),(0,i.Wm)(C,{modelValue:e.csvDataAutomaticHeader,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.csvDataAutomaticHeader=t),e.onCsvHeaderChange],label:"Generate Headers",title:"Generate headers with names c0..cX, disable it if your first line has header names.","checked-icon":"check","unchecked-icon":"clear",color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,i.Wm)(v,{fileDrop:e.onCsvEditorChange},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{height:e.bottomHeight,value:e.csvDataRef,theme:e.vsTheme,language:"none",options:e.csvEditorOptions,onChange:e.onCsvEditorChange},null,8,["height","value","theme","options","onChange"])])),_:1},8,["fileDrop"])])),after:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-primary text-white shadow-2",style:{"padding-left":"0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{onClick:e.copyResultToClipboard,icon:"content_copy",stretch:"",title:"Copy to clipboard"},null,8,["onClick"]),(0,i.Wm)(g),(0,i.Wm)(c,{shrink:""},{default:(0,i.w5)((()=>[l])),_:1}),(0,i.Wm)(b,{modelValue:e.previewLanguage,"onUpdate:modelValue":t[2]||(t[2]=t=>e.previewLanguage=t),options:e.previewLanguages,label:"Language",dense:"",class:"on-right",style:{"min-width":"100px"}},null,8,["modelValue","options"])])),_:1}),(0,i.Wm)(f,{height:e.bottomHeight,value:e.generatedContentRef,theme:e.vsTheme,language:e.previewLanguage,options:e.generatedContentEditorOptions,onChange:e.onResultEditorChange},null,8,["height","value","theme","language","options","onChange"])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})}var h=o(61959),u=o(53958);function p(){}const c={name:"MonacoEditor",props:{diffEditor:{type:Boolean,default:!1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},original:String,value:String,language:{type:String,default:"javascript"},theme:{type:String,default:"vs"},options:{type:Object,default(){return{}}},editorMounted:{type:Function,default:p},editorBeforeMount:{type:Function,default:p}},watch:{options:{deep:!0,handler(e){this.editor&&this.editor.updateOptions(e)}},value(){if(!this.editor)return;if("string"!==typeof this.value)return;let e=this._getValue();this.value!==e&&this._setValue(this.value)},language(){if(this.editor)if(this.diffEditor){const{original:e,modified:t}=this.editor.getModel();u.editor.setModelLanguage(e,this.language),u.editor.setModelLanguage(t,this.language)}else u.editor.setModelLanguage(this.editor.getModel(),this.language)},theme(){this.editor&&u.editor.setTheme(this.theme)},style(){this.editor&&this.$nextTick((()=>{this.editor.layout()}))}},computed:{style(){return{width:/^\d+$/.test(this.width)?`${this.width}px`:this.width,height:/^\d+$/.test(this.height)?`${this.height}px`:this.height,"max-width":"100%","max-height":"100%",overflow:"hidden"}}},render(){return(0,i.h)("div",{class:"monaco_editor_container",style:{width:this.width,height:this.height,"max-width":"100%","max-height":"100%",overflow:"hidden"}})},mounted(){this.initMonaco()},beforeUnmount(){this.editor&&this.editor.dispose()},methods:{initMonaco(){const{value:e,language:t,theme:o,options:i}=this;Object.assign(i,this._editorBeforeMount());const n=this.diffEditor?u.editor.createDiffEditor:u.editor.create;this.editor=n(this.$el,{value:e,language:t,theme:o,...i}),this.diffEditor&&this._setModel(this.value,this.original),this._editorMounted(this.editor)},_getEditor(){return this.editor?this.diffEditor?this.editor.modifiedEditor:this.editor:null},_setModel(e,t){const{language:o}=this,i=u.editor.createModel(t,o),n=u.editor.createModel(e,o);this.editor.setModel({original:i,modified:n})},_setValue(e){let t=this._getEditor();if(t)return t.setValue(e)},_getValue(){let e=this._getEditor();return e?e.getValue():""},_editorBeforeMount(){const e=this.editorBeforeMount(u);return e||{}},_editorMounted(e){this.editorMounted(e,u),this.diffEditor?e.onDidUpdateDiff((e=>{const t=this._getValue();this._emitChange(t,e)})):e.onDidChangeModelContent((e=>{const t=this._getValue();this._emitChange(t,e)}))},_emitChange(e,t){this.$emit("change",e,t),this.$emit("input",e)}}},g=c,m=g;function f(e,t,o,a,s,r){return(0,i.wg)(),(0,i.iD)("div",{onDragover:t[0]||(t[0]=(0,n.iM)((()=>{}),["prevent"])),onDrop:t[1]||(t[1]=(...t)=>e.dropFile&&e.dropFile(...t))},[(0,i.WI)(e.$slots,"default")],32)}const v=(0,i.aZ)({name:"FileDrop",props:{fileDrop:{type:Function,default:e=>!0}},methods:{dropFile:function(e){var t;e.preventDefault(),null===(t=e.dataTransfer)||void 0===t||t.files[0].text().then((e=>this.fileDrop(e)))}},setup(){return{}}});var w=o(74260);const C=(0,w.Z)(v,[["render",f]]),y=C;var b=o(48825),E=o(41914),H=o(7006);function R(e){return"string"===typeof e?e:e instanceof Error?e.message:"unknow error"}function _(e,t){const o=e.split(/\r?\n/),i=[],n=[],a=o[0].split(";");for(let r=0;r<a.length;r++)t?i.push(a[r]):i.push(`c${r}`);let s=t?1:0;for(s;s<o.length;s++){const e=o[s];if(""==e.trim())continue;const a=e.split(";"),r={},l=t?s-1:s;r["l0"]=l.toString(),r["l1"]=(l+1).toString();for(let t=0;t<i.length;t++)r[i[t]]=a[t];n.push(r)}return n}class M{constructor(){this.template="",this.csvRaw="",this.jsonRaw="",this.csvHasHeader=!0,this.rows={},this.json={},this.onError=e=>{throw e},this.onSuccess=e=>{}}render(){try{const e=H.Z.render(this.template,this.json);return e}catch(e){return R(e)}}setTemplate(e){if("string"!==typeof e)return this;try{this.template=e}catch(t){this.onError(R(t))}return this}setJson(e){if("string"!==typeof e)return this;try{this.jsonRaw=e,this.json=JSON.parse(this.jsonRaw),this.json.rows=this.rows}catch(t){this.onError(R(t))}return this}setCsv(e,t){if("string"!==typeof t&&void 0!==t)return this;try{void 0!==t&&(this.csvRaw=t),this.csvHasHeader=e,this.rows=_(this.csvRaw,this.csvHasHeader),this.json.rows=this.rows}catch(o){this.onError(R(o))}return this}}class k{}const D=new k;D.template='<ul class="{{key}}">\n{{#array}}\n  <li>{{k1}} : {{k2}}</li>\n{{/array}}\n{{#rows}}\n  <li>{{l0}}:{{l1}} : {{a}}{{c0}} : {{b}}{{c1}} : {{c}}{{c2}}</li>\n{{/rows}}\n</ul>',D.json='{\n  "key": "value",\n  "array": [\n    { "k1": "abc", "k2": "def" },\n    { "k1": "ghi", "k2": "jkl" }\n  ]\n}\n',D.csv="a;b;c\n1;2;3\n4;5;6\n",D.csvHasHeaders=!0,D.language="xml";const W=55,j={horizontalSplitterModel:(0,h.iH)(W),topSplitterModel:(0,h.iH)(50),bottomSplitterModel:(0,h.iH)(50),topHeight:(0,h.iH)(`calc(${W}vh - 50px)`),bottomHeight:(0,h.iH)(`calc(${100-W}vh - 50px)`),csvDataAutomaticHeader:(0,h.iH)(D.csvHasHeaders),templateRef:(0,h.iH)(D.template||""),jsonRef:(0,h.iH)(D.json||""),csvDataRef:(0,h.iH)(D.csv||""),generatedContentRef:(0,h.iH)(""),previewLanguage:(0,h.iH)(D.language),previewLanguages:["none","xml","json","javascript","typescript"],templateEditorOptions:(0,h.iH)({automaticLayout:!0}),jsonEditorOptions:(0,h.iH)({automaticLayout:!0}),csvEditorOptions:(0,h.iH)({automaticLayout:!0}),generatedContentEditorOptions:(0,h.iH)({automaticLayout:!0,readOnly:!0})},V=new M;let T,x=j.generatedContentRef.value;const S=(0,i.aZ)({name:"PageIndex",components:{MonacoEditor:m,FileDrop:y},methods:{onTemplateEditorChange:function(e){j.templateRef.value=e,j.generatedContentRef.value=V.setTemplate(e).render()},onJsonEditorChange:function(e){j.jsonRef.value=e,j.generatedContentRef.value=V.setJson(e).render()},onCsvEditorChange:function(e){j.csvDataRef.value=e,j.generatedContentRef.value=V.setCsv(!j.csvDataAutomaticHeader.value,e).render()},onCsvHeaderChange:function(){j.generatedContentRef.value=V.setCsv(!j.csvDataAutomaticHeader.value,void 0).render()},onResultEditorChange:function(e){x=e},copyResultToClipboard:function(){(0,E.Z)(x).then((()=>{})).catch((()=>{}))},onTemplateEditorResize:function(e){j.topHeight.value=e.height-50+"px"},onCsvEditorResize:function(e){j.bottomHeight.value=e.height-50+"px"}},computed:{vsTheme(){return T.dark.isActive?"vs-dark":"vs"}},mounted(){j.generatedContentRef.value=V.render()},setup(){return T=(0,b.Z)(),V.onError=e=>{T.notify({color:"negative",message:e,icon:"report_problem",position:"top"})},V.setTemplate(j.templateRef.value),V.setJson(j.jsonRef.value),V.setCsv(!j.csvDataAutomaticHeader.value,j.csvDataRef.value),Object.assign({},j)}});var Z=o(24379),O=o(80218),z=o(15151),L=o(39570),U=o(13747),$=o(62025),q=o(62582),Q=o(64607),F=o(57122),J=o(7518),A=o.n(J);const B=(0,w.Z)(S,[["render",d]]),N=B;A()(S,"components",{QPage:Z.Z,QSplitter:O.Z,QResizeObserver:z.Z,QToolbar:L.Z,QToolbarTitle:U.Z,QSpace:$.Z,QToggle:q.Z,QBtn:Q.Z,QSelect:F.Z})}}]);