"use strict";(self["webpackChunkrow_bender"]=self["webpackChunkrow_bender"]||[]).push([[348],{97348:(e,t,i)=>{i.r(t),i.d(t,{default:()=>U});var o=i(83673);const a=(0,o.Uk)(" Template "),n=(0,o.Uk)(" Result "),r=(0,o.Uk)(" Rows (csv) ");function s(e,t,i,s,l,h){const d=(0,o.up)("q-resize-observer"),u=(0,o.up)("q-toolbar-title"),c=(0,o.up)("q-toolbar"),g=(0,o.up)("MonacoEditor"),p=(0,o.up)("q-btn"),m=(0,o.up)("q-space"),f=(0,o.up)("q-splitter"),v=(0,o.up)("q-toggle"),w=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(w,{class:"justify-evenly"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.horizontalSplitterModel,"onUpdate:modelValue":t[2]||(t[2]=t=>e.horizontalSplitterModel=t),style:{width:"100%","max-height":"100%",height:"calc(100vh - 50px)"},horizontal:""},{before:(0,o.w5)((()=>[(0,o.Wm)(f,{modelValue:e.topSplitterModel,"onUpdate:modelValue":t[0]||(t[0]=t=>e.topSplitterModel=t),style:{width:"100%"}},{before:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"bg-primary text-white shadow-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[a])),_:1})])),_:1}),(0,o.Wm)(g,{height:e.topHeight,value:e.templateRef,width:"100%",theme:e.theme,language:"handlebars",options:e.templateEditorOptions,onChange:e.onTemplateEditorChange},null,8,["height","value","theme","options","onChange"])])),after:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"bg-primary text-white shadow-2",style:{"padding-left":"0"}},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:"primary",onClick:e.copyResultToClipboard,icon:"content_copy",stretch:"",title:"Copy to clipboard"},null,8,["onClick"]),(0,o.Wm)(m),(0,o.Wm)(u,{shrink:""},{default:(0,o.w5)((()=>[n])),_:1})])),_:1}),(0,o.Wm)(g,{height:e.topHeight,value:e.generatedContentRef,width:"100%",theme:e.theme,language:"none",options:e.generatedContentEditorOptions,onChange:e.onResultEditorChange},null,8,["height","value","theme","options","onChange"])])),default:(0,o.w5)((()=>[(0,o.Wm)(d,{onResize:e.onTemplateEditorResize},null,8,["onResize"])])),_:1},8,["modelValue"])])),after:(0,o.w5)((()=>[(0,o.Wm)(d,{onResize:e.onCsvEditorResize},null,8,["onResize"]),(0,o.Wm)(c,{class:"bg-primary text-white shadow-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[r])),_:1}),(0,o.Wm)(v,{modelValue:e.csvDataAutomaticHeader,"onUpdate:modelValue":[t[1]||(t[1]=t=>e.csvDataAutomaticHeader=t),e.render],label:"Generate Headers",title:"Generate headers with names c0..cX, disable it if your first line has header names.","checked-icon":"check","unchecked-icon":"clear",color:"secondary"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(g,{height:e.bottomHeight,value:e.csvDataRef,width:"100%",theme:e.theme,language:"none",options:e.csvEditorOptions,onChange:e.onCsvEditorChange},null,8,["height","value","theme","options","onChange"])])),_:1},8,["modelValue"])])),_:1})}var l=i(61959),h=i(53958);function d(){}const u={name:"MonacoEditor",props:{diffEditor:{type:Boolean,default:!1},width:{type:[String,Number],default:"100%"},height:{type:[String,Number],default:"100%"},original:String,value:String,language:{type:String,default:"javascript"},theme:{type:String,default:"vs"},options:{type:Object,default(){return{}}},editorMounted:{type:Function,default:d},editorBeforeMount:{type:Function,default:d}},watch:{options:{deep:!0,handler(e){this.editor&&this.editor.updateOptions(e)}},value(){if(!this.editor)return;if("string"!==typeof this.value)return;let e=this._getValue();this.value!==e&&this._setValue(this.value)},language(){if(this.editor)if(this.diffEditor){const{original:e,modified:t}=this.editor.getModel();h.editor.setModelLanguage(e,this.language),h.editor.setModelLanguage(t,this.language)}else h.editor.setModelLanguage(this.editor.getModel(),this.language)},theme(){this.editor&&h.editor.setTheme(this.theme)},style(){this.editor&&this.$nextTick((()=>{this.editor.layout()}))}},computed:{style(){return{width:/^\d+$/.test(this.width)?`${this.width}px`:this.width,height:/^\d+$/.test(this.height)?`${this.height}px`:this.height,"max-width":"100%","max-height":"100%",overflow:"hidden"}}},render(){return(0,o.h)("div",{class:"monaco_editor_container",style:{width:this.width,height:this.height,"max-width":"100%","max-height":"100%",overflow:"hidden"}})},mounted(){this.initMonaco()},beforeUnmount(){this.editor&&this.editor.dispose()},methods:{initMonaco(){const{value:e,language:t,theme:i,options:o}=this;Object.assign(o,this._editorBeforeMount()),this.editor=h.editor[this.diffEditor?"createDiffEditor":"create"](this.$el,{value:e,language:t,theme:i,...o}),this.diffEditor&&this._setModel(this.value,this.original),this._editorMounted(this.editor)},_getEditor(){return this.editor?this.diffEditor?this.editor.modifiedEditor:this.editor:null},_setModel(e,t){const{language:i}=this,o=h.editor.createModel(t,i),a=h.editor.createModel(e,i);this.editor.setModel({original:o,modified:a})},_setValue(e){let t=this._getEditor();if(t)return t.setValue(e)},_getValue(){let e=this._getEditor();return e?e.getValue():""},_editorBeforeMount(){const e=this.editorBeforeMount(h);return e||{}},_editorMounted(e){this.editorMounted(e,h),this.diffEditor?e.onDidUpdateDiff((e=>{const t=this._getValue();this._emitChange(t,e)})):e.onDidChangeModelContent((e=>{const t=this._getValue();this._emitChange(t,e)}))},_emitChange(e,t){this.$emit("change",e,t),this.$emit("input",e)}}},c=u,g=c;var p=i(41914),m=i(7006);class f{constructor(){this.rows=[]}}class v{constructor(e,t){this.value=e,this.error=t}}class w{constructor(){this.csvRaw="",this.csvHasHeader=!0,this.rowsData=new f}parseCsv(){const e=this.csvRaw.split(/\r?\n/),t=[],i=[],o=e[0].split(";");for(let n=0;n<o.length;n++)this.csvHasHeader?t.push(o[n]):t.push(`c${n}`);let a=this.csvHasHeader?1:0;for(a;a<e.length;a++){const o=e[a];if(""==o.trim())continue;const n=o.split(";"),r={};for(let e=0;e<t.length;e++)r[t[e]]=n[e];i.push(r)}return i}generate(e,t,i){this.csvRaw===t&&i==this.csvHasHeader&&0!=this.rowsData.rows.length||(this.csvHasHeader=i,this.csvRaw=t,this.rowsData.rows=this.parseCsv());try{const t=m.Z.render(e,this.rowsData);return new v(t,"")}catch(o){let e="";return e="string"===typeof o?o:o instanceof Error?o.message:"unknow error",new v("",e)}}}const C=new w,y={theme:(0,l.iH)("vs-dark"),horizontalSplitterModel:(0,l.iH)(65),topSplitterModel:(0,l.iH)(50),topHeight:(0,l.iH)("calc(65vh - 50px)"),bottomHeight:(0,l.iH)("calc(35vh - 50px)"),csvDataAutomaticHeader:(0,l.iH)(!1),templateRef:(0,l.iH)("<ul>\r\n{{#rows}}\r\n  <li>{{a}}{{c0}} : {{b}}{{c1}} : {{c}}{{c2}}</li>\r\n{{/rows}}\r\n</ul>"),csvDataRef:(0,l.iH)("a;b;c\r\n1;2;3\r\n4;5;6\r\n"),generatedContentRef:(0,l.iH)(""),templateEditorOptions:(0,l.iH)({automaticLayout:!0}),csvEditorOptions:(0,l.iH)({automaticLayout:!0}),generatedContentEditorOptions:(0,l.iH)({automaticLayout:!0,readOnly:!0})};let H=y.templateRef.value,b=y.generatedContentRef.value,_=y.csvDataRef.value;const E=(0,o.aZ)({name:"PageIndex",components:{MonacoEditor:g},methods:{render:function(){const e=C.generate(H,_,!y.csvDataAutomaticHeader.value);y.generatedContentRef.value=e.value,""!==e.error&&(y.generatedContentRef.value=e.error)},onTemplateEditorChange:function(e){"string"===typeof e&&(H=e,this.render())},onResultEditorChange:function(e){b=e},onCsvEditorChange:function(e){"string"===typeof e&&(_=e,this.render())},copyResultToClipboard:function(){(0,p.Z)(b).then((()=>{})).catch((()=>{}))},onTemplateEditorResize:function(e){y.topHeight.value=e.height-50+"px"},onCsvEditorResize:function(e){y.bottomHeight.value=e.height-50+"px"}},mounted(){this.render()},setup(){return Object.assign({},y)}});var M=i(74260),R=i(24379),V=i(80218),x=i(15151),k=i(39570),W=i(13747),D=i(41828),z=i(62025),S=i(34904),T=i(7518),O=i.n(T);const Z=(0,M.Z)(E,[["render",s]]),U=Z;O()(E,"components",{QPage:R.Z,QSplitter:V.Z,QResizeObserver:x.Z,QToolbar:k.Z,QToolbarTitle:W.Z,QBtn:D.Z,QSpace:z.Z,QToggle:S.Z})}}]);